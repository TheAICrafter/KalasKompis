<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalaskollen</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
        }
        .logo {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .tagline {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 5px;
        }
        .subtitle {
            color: #888;
        }
        .form-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }
        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        .input-field:focus {
            outline: none;
            border-color: #ff6b6b;
        }
        .interests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .interest-card {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
        }
        .interest-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .interest-card.selected {
            border-color: #ff6b6b;
            background: #ffe5e5;
        }
        .interest-card.premium {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .interest-card.premium .lock-icon {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1rem;
        }
        .interest-emoji {
            font-size: 2rem;
            margin-bottom: 8px;
            display: block;
        }
        .interest-name {
            font-weight: 600;
            font-size: 0.9rem;
        }
        .theme-categories {
            margin-bottom: 20px;
        }
        .category-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 2px solid #eee;
        }
        .free-themes {
            color: #28a745;
        }
        .premium-themes {
            color: #6f42c1;
        }
        .budget-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .budget-card {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        .budget-card:hover {
            transform: translateY(-2px);
        }
        .budget-card.selected {
            border-color: #ff6b6b;
            background: #ffe5e5;
        }
        .location-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        .location-card {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        .location-card:hover {
            transform: translateY(-2px);
        }
        .location-card.selected {
            border-color: #ff6b6b;
            background: #ffe5e5;
        }
        .submit-btn {
            width: 100%;
            padding: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
        }
        .submit-btn.enabled {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
        }
        .submit-btn.enabled:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .submit-btn.disabled {
            background: #ccc;
            color: #666;
            cursor: not-allowed;
        }
        .loading {
            text-align: center;
            padding: 60px 20px;
        }
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #ff6b6b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .result-section {
            margin-bottom: 30px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-top: 5px solid #ff6b6b;
        }
        .result-section h3 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .activity-item {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border: 1px solid #f0f0f0;
            transition: transform 0.2s ease;
        }
        .activity-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        .activity-name {
            font-weight: bold;
            color: #333;
            font-size: 1.2rem;
            margin: 0;
        }
        .activity-duration {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            white-space: nowrap;
        }
        .activity-description {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 1rem;
        }
        .activity-instructions {
            background: linear-gradient(135deg, #e3f2fd 0%, #f1f8e9 100%);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
            position: relative;
        }
        .activity-instructions::before {
            content: "üìã";
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 1.2rem;
        }
        .activity-instructions strong {
            display: block;
            margin-bottom: 10px;
            color: #1976d2;
            margin-left: 25px;
        }
        .instructions-text {
            margin-left: 25px;
            line-height: 1.6;
        }
        .activity-materials {
            background: linear-gradient(135deg, #f3e5f5 0%, #fce4ec 100%);
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            border-left: 4px solid #9c27b0;
            position: relative;
        }
        .activity-materials::before {
            content: "üõ†Ô∏è";
            position: absolute;
            top: 12px;
            left: 15px;
            font-size: 1.2rem;
        }
        .activity-materials strong {
            display: block;
            margin-bottom: 8px;
            color: #7b1fa2;
            margin-left: 25px;
        }
        .materials-text {
            margin-left: 25px;
            color: #666;
        }
        .invitation-box {
            background: #fff3cd;
            border: 2px dashed #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
        }
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 0.8rem;
        }
        .copy-btn:hover {
            background: #218838;
        }
        .food-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .price-tag {
            font-size: 1.2rem;
        }
        .accessories-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .new-party-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            width: 100%;
        }
        .new-party-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .premium-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .premium-modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            margin: 20px;
        }
        .premium-modal h3 {
            color: #6f42c1;
            margin-bottom: 20px;
        }
        .premium-features {
            text-align: left;
            margin: 20px 0;
        }
        .premium-features li {
            margin-bottom: 10px;
            color: #28a745;
        }
        .upgrade-btn {
            background: linear-gradient(45deg, #6f42c1, #e83e8c);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
        }
        .close-modal-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        .confirmation-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #c3e6cb;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 768px) {
            .interests-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .budget-grid {
                grid-template-columns: 1fr;
            }
            .location-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üéâ Kalaskollen</div>
            <div class="tagline">F√∂r√§ldralugnet b√∂rjar h√§r.</div>
            <div class="subtitle">Din AI-assistent f√∂r det perfekta barnkalaset</div>
        </div>

        <!-- Form -->
        <div id="form-container">
            <div class="form-section">
                <div class="section-title">üéÇ Barnets √•lder</div>
                <input type="number" class="input-field" id="age" placeholder="Ange √•lder..." min="1" max="18">
            </div>

            <div class="form-section">
                <div class="section-title">‚ù§Ô∏è Barnets intressen</div>
                <div class="theme-categories">
                    <div class="category-header free-themes">üÜì Gratis teman</div>
                    <div class="interests-grid" id="free-themes">
                        <div class="interest-card" data-theme="musik">
                            <span class="interest-emoji">üéµ</span>
                            <div class="interest-name">Musik</div>
                        </div>
                        <div class="interest-card" data-theme="prinsessor">
                            <span class="interest-emoji">üëë</span>
                            <div class="interest-name">Prinsessor</div>
                        </div>
                        <div class="interest-card" data-theme="pyssel">
                            <span class="interest-emoji">üé®</span>
                            <div class="interest-name">Pyssel</div>
                        </div>
                        <div class="interest-card" data-theme="fotboll">
                            <span class="interest-emoji">‚öΩ</span>
                            <div class="interest-name">Fotboll</div>
                        </div>
                        <div class="interest-card" data-theme="superhjaltar">
                            <span class="interest-emoji">ü¶∏</span>
                            <div class="interest-name">Superhj√§ltar</div>
                        </div>
                    </div>

                    <div class="category-header premium-themes">üîí Premium teman</div>
                    <div class="interests-grid" id="premium-themes">
                        <div class="interest-card premium" data-theme="minecraft">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">‚õèÔ∏è</span>
                            <div class="interest-name">Minecraft</div>
                        </div>
                        <div class="interest-card premium" data-theme="dans">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">üíÉ</span>
                            <div class="interest-name">Dans</div>
                        </div>
                        <div class="interest-card premium" data-theme="bilar">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">üöó</span>
                            <div class="interest-name">Bilar</div>
                        </div>
                        <div class="interest-card premium" data-theme="djur">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">üê®</span>
                            <div class="interest-name">Djur</div>
                        </div>
                        <div class="interest-card premium" data-theme="rymden">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">üöÄ</span>
                            <div class="interest-name">Rymden</div>
                        </div>
                        <div class="interest-card premium" data-theme="hastar">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">üê¥</span>
                            <div class="interest-name">H√§star</div>
                        </div>
                        <div class="interest-card premium" data-theme="poliser">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">üëÆ</span>
                            <div class="interest-name">Poliser</div>
                        </div>
                        <div class="interest-card premium" data-theme="dinosaurier">
                            <span class="lock-icon">üîí</span>
                            <span class="interest-emoji">ü¶ï</span>
                            <div class="interest-name">Dinosaurier</div>
                        </div>
                    </div>
                </div>
                <div id="theme-confirmation" class="confirmation-message hidden"></div>
            </div>

            <div class="form-section">
                <div class="section-title">üë• Antal barn som bjuds</div>
                <input type="number" class="input-field" id="guestCount" placeholder="Antal barn..." min="1" max="30">
            </div>

            <div class="form-section">
                <div class="section-title">üí∞ Budget</div>
                <div class="budget-grid">
                    <div class="budget-card" data-budget="lag">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üí∞</div>
                        <div style="font-weight: bold;">L√•g budget</div>
                        <div style="color: #666;">300-500 kr</div>
                    </div>
                    <div class="budget-card" data-budget="medel">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üí∏</div>
                        <div style="font-weight: bold;">Medel budget</div>
                        <div style="color: #666;">500-1000 kr</div>
                    </div>
                    <div class="budget-card" data-budget="hog">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üèÜ</div>
                        <div style="font-weight: bold;">H√∂g budget</div>
                        <div style="color: #666;">1000+ kr</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">üìç Var ska kalaset h√•llas?</div>
                <div class="location-grid">
                    <div class="location-card" data-location="hemma">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üè†</div>
                        <div style="font-weight: bold;">Hemma</div>
                    </div>
                    <div class="location-card" data-location="utomhus">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üå≥</div>
                        <div style="font-weight: bold;">Utomhus</div>
                    </div>
                    <div class="location-card" data-location="lokal">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üè¢</div>
                        <div style="font-weight: bold;">I lokal</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">üçΩÔ∏è Matpreferenser (valfritt)</div>
                <textarea class="input-field" id="foodPrefs" placeholder="T.ex. vegetariskt, allergier..." rows="3"></textarea>
            </div>

            <button class="submit-btn disabled" id="submit-btn">
                ‚ú® Skapa mitt dr√∂mkalas! üéâ
            </button>
        </div>

        <!-- Loading -->
        <div id="loading-container" class="hidden">
            <div class="loading">
                <div class="loading-spinner"></div>
                <h2>Skapar ditt perfekta kalas... ‚ú®</h2>
                <div style="color: #666;">
                    <p>üé® V√§ljer tema...</p>
                    <p>üé≤ Planerar aktiviteter...</p>
                    <p>üßÅ F√∂rbereder meny...</p>
                </div>
            </div>
        </div>

        <!-- Results -->
        <div id="results-container" class="hidden">
            <div style="text-align: center; margin-bottom: 40px;">
                <h1 style="font-size: 3rem; font-weight: bold; background: linear-gradient(45deg, #ff6b6b, #4ecdc4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 10px;">üéâ Ditt dr√∂mkalas √§r klart!</h1>
                <p style="font-size: 1.2rem; color: #666;">Allt du beh√∂ver f√∂r ett perfekt kalas</p>
            </div>
            
            <div class="result-section">
                <h3 id="theme-title">üéà Tema</h3>
                <div id="theme-content"></div>
            </div>

            <div class="result-section">
                <h3>üé≤ Lekf√∂rslag</h3>
                <div id="activities-content"></div>
            </div>

            <div class="result-section">
                <h3>üíå Inbjudningstext</h3>
                <div id="invitation-content"></div>
            </div>

            <div class="result-section">
                <h3>üßÅ Fika & matf√∂rslag</h3>
                <div id="food-content"></div>
            </div>

            <div class="result-section">
                <h3>üõçÔ∏è Tillbeh√∂r & dekorationer</h3>
                <div id="accessories-content"></div>
            </div>

            <button class="new-party-btn" onclick="resetForm()">‚Üê Planera nytt kalas</button>
        </div>

        <!-- Premium Modal -->
        <div id="premium-modal" class="premium-modal hidden">
            <div class="premium-modal-content">
                <h3>üîí Detta tema ing√•r i Kalaskollen Premium</h3>
                <p>L√•s upp fler teman, extra AI-inneh√•ll och obegr√§nsade inbjudningar.</p>
                <ul class="premium-features">
                    <li>‚úÖ Tillg√•ng till alla teman</li>
                    <li>‚úÖ Extra lekar, inbjudningar och fikaid√©er</li>
                    <li>‚úÖ Obegr√§nsat antal SMS/mail</li>
                    <li>‚úÖ Prioritetsupport</li>
                </ul>
                <button class="upgrade-btn" onclick="upgradeToPremium()">Uppgradera till Premium</button>
                <button class="close-modal-btn" onclick="closePremiumModal()">St√§ng</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let formData = {
            age: '',
            theme: '',
            guestCount: '',
            budget: '',
            location: '',
            foodPrefs: ''
        };

        let isPremium = localStorage.getItem('kalaskollen-premium') === 'true';
        let currentInvitationIndex = 0;

        // Premium themes
        const premiumThemes = ['minecraft', 'dans', 'bilar', 'djur', 'rymden', 'hastar', 'poliser', 'dinosaurier'];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            updatePremiumAccess();
        });

        function initializeEventListeners() {
            // Age input
            document.getElementById('age').addEventListener('input', function(e) {
                formData.age = e.target.value;
                validateForm();
            });

            // Guest count input
            document.getElementById('guestCount').addEventListener('input', function(e) {
                formData.guestCount = e.target.value;
                validateForm();
            });

            // Food preferences
            document.getElementById('foodPrefs').addEventListener('input', function(e) {
                formData.foodPrefs = e.target.value;
            });

            // Theme selection
            document.querySelectorAll('.interest-card').forEach(card => {
                card.addEventListener('click', function() {
                    const theme = this.dataset.theme;
                    const isPremiumTheme = premiumThemes.includes(theme);
                    
                    if (isPremiumTheme && !isPremium) {
                        showPremiumModal();
                        return;
                    }
                    
                    selectTheme(theme);
                });
            });

            // Budget selection
            document.querySelectorAll('.budget-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.budget-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    formData.budget = this.dataset.budget;
                    validateForm();
                });
            });

            // Location selection
            document.querySelectorAll('.location-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.location-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    formData.location = this.dataset.location;
                    validateForm();
                });
            });

            // Submit button
            document.getElementById('submit-btn').addEventListener('click', function() {
                if (isFormValid()) {
                    generateParty();
                }
            });
        }

        function selectTheme(theme) {
            document.querySelectorAll('.interest-card').forEach(c => c.classList.remove('selected'));
            document.querySelector(`[data-theme="${theme}"]`).classList.add('selected');
            formData.theme = theme;
            
            const confirmation = document.getElementById('theme-confirmation');
            const emoji = document.querySelector(`[data-theme="${theme}"] .interest-emoji`).textContent;
            const name = document.querySelector(`[data-theme="${theme}"] .interest-name`).textContent;
            
            confirmation.textContent = `Temat ${emoji} ${name} √§r valt! AI:n anpassar nu lekar, inbjudningar och kalasid√©er.`;
            confirmation.classList.remove('hidden');
            
            validateForm();
        }

        function validateForm() {
            const isValid = formData.age && formData.theme && formData.guestCount && formData.budget && formData.location;
            const submitBtn = document.getElementById('submit-btn');
            
            if (isValid) {
                submitBtn.classList.remove('disabled');
                submitBtn.classList.add('enabled');
            } else {
                submitBtn.classList.remove('enabled');
                submitBtn.classList.add('disabled');
            }
        }

        function isFormValid() {
            return formData.age && formData.theme && formData.guestCount && formData.budget && formData.location;
        }

        function generateParty() {
            document.getElementById('form-container').classList.add('hidden');
            document.getElementById('loading-container').classList.remove('hidden');

            setTimeout(() => {
                generateContent();
                document.getElementById('loading-container').classList.add('hidden');
                document.getElementById('results-container').classList.remove('hidden');
            }, 3000);
        }

        function generateContent() {
            const age = parseInt(formData.age);
            const theme = formData.theme;
            const budget = formData.budget;
            
            // Generate theme content
            generateThemeContent(theme);
            
            // Generate activities
            generateActivities(theme, age);
            
            // Generate invitation
            generateInvitation(theme);
            
            // Generate food suggestions
            generateFoodSuggestions(theme, budget);
            
            // Generate accessories
            generateAccessories(theme, budget);
        }

        function generateThemeContent(theme) {
            const themes = {
                musik: {
                    name: 'Musikalisk magi',
                    description: 'Ett rytmiskt kalas fyllt av musik, dans och kreativitet d√§r barnen f√•r utforska ljud och melodier!',
                    emoji: 'üéµ'
                },
                prinsessor: {
                    name: 'Magisk prinsessbal',
                    description: 'Ett kungligt kalas med glitter, kronor och √§ventyr i sagolandet!',
                    emoji: 'üëë'
                },
                pyssel: {
                    name: 'Kreativa verkstan',
                    description: 'Ett kalas d√§r fantasin f√•r fl√∂da fritt genom pysslande och skapande!',
                    emoji: 'üé®'
                },
                fotboll: {
                    name: 'Fotbollsfest',
                    description: 'Ett energifyllt kalas med fotbollsaktiviteter och lagk√§nsla!',
                    emoji: '‚öΩ'
                },
                superhjaltar: {
                    name: 'Superhj√§lte akademi',
                    description: 'Tr√§na era superkrafter och r√§dda v√§rlden tillsammans!',
                    emoji: 'ü¶∏'
                },
                minecraft: {
                    name: 'Blocky builder adventure',
                    description: 'Bygg, utforska och skapa i Minecraft-v√§rlden!',
                    emoji: '‚õèÔ∏è'
                },
                dans: {
                    name: 'Dansparti deluxe',
                    description: 'Ett energifyllt kalas med dans, musik och show!',
                    emoji: 'üíÉ'
                },
                bilar: {
                    name: 'Racing championship',
                    description: 'K√∂r fort och ha kul med bilar och racing!',
                    emoji: 'üöó'
                },
                djur: {
                    name: 'Djur√§ventyr',
                    description: 'Utforska djurriket och l√§r er om olika djur!',
                    emoji: 'üê®'
                },
                rymden: {
                    name: 'Rymd√§ventyr',
                    description: 'Res till rymden och utforska planeter och stj√§rnor!',
                    emoji: 'üöÄ'
                },
                hastar: {
                    name: 'H√§st och ridning',
                    description: 'Allt om h√§star, ridning och stalliv!',
                    emoji: 'üê¥'
                },
                poliser: {
                    name: 'Polisstation',
                    description: 'L√∂s mysterier och h√•ll ordning som riktiga poliser!',
                    emoji: 'üëÆ'
                },
                dinosaurier: {
                    name: 'Jurassic adventure',
                    description: 'Uppt√§ck dinosauriernas v√§rld och bli paleontologer!',
                    emoji: 'ü¶ï'
                }
            };

            const themeData = themes[theme];
            const content = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 4rem; margin-bottom: 15px;">${themeData.emoji}</div>
                    <h2 style="color: #ff6b6b; margin-bottom: 10px;">${themeData.name}</h2>
                    <p style="font-size: 1.1rem; color: #666;">${themeData.description}</p>
                </div>
            `;
            
            document.getElementById('theme-content').innerHTML = content;
            document.getElementById('theme-title').innerHTML = `${themeData.emoji} ${themeData.name}`;
        }

        function generateActivities(theme, age) {
            const activities = getActivitiesForTheme(theme, age);
            
            let html = '';
            activities.forEach(activity => {
                html += `
                    <div class="activity-item">
                        <div class="activity-header">
                            <div class="activity-name">${activity.name}</div>
                            <div class="activity-duration">‚è±Ô∏è ${activity.duration}</div>
                        </div>
                        <div class="activity-description">${activity.description}</div>
                        <div class="activity-instructions">
                            <strong>Instruktioner:</strong>
                            <div class="instructions-text">${activity.instructions}</div>
                        </div>
                        <div class="activity-materials">
                            <strong>Material:</strong>
                            <div class="materials-text">${activity.materials}</div>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('activities-content').innerHTML = html;
        }

        function getActivitiesForTheme(theme, age) {
            const ageGroup = age <= 5 ? 'small' : age <= 8 ? 'medium' : 'large';
            
            const activities = {
                musik: {
                    small: [
                        {
                            name: 'Djurljud-dans',
                            description: 'Barn imiterar olika djur till musik och dansar som djuren g√∂r.',
                            instructions: 'Spela musik och ropa ut olika djur. Barnen dansar och l√•ter som djuret. V√§xla mellan lugn och energisk musik.',
                            materials: 'Bluetoothh√∂gtalare, lista p√• djur',
                            duration: '15 min'
                        },
                        {
                            name: 'Musikstopp',
                            description: 'N√§r musiken stannar fryser alla i roliga poser.',
                            instructions: 'Spela musik, barnen dansar fritt. Pausa musiken ov√§ntat. Alla m√•ste frysa. Den som r√∂r sig f√•r ge n√§sta pose-f√∂rslag.',
                            materials: 'Bluetoothh√∂gtalare',
                            duration: '15 min'
                        }
                    ],
                    medium: [
                        {
                            name: 'Bygg egna instrument',
                            description: 'Tillverka riktiga instrument av √•tervinning som barnen kan spela p√•.',
                            instructions: 'Station 1: Maracas av plastflaskor + ris/b√∂nor. Station 2: Trummor av tomburkar + ballonger som trumskinn. Station 3: Gitarrer av skokartonger + gummiband. L√•t barnen dekorera med klisterm√§rken.',
                            materials: 'Tomma flaskor, ris, tomburkar, ballonger, skokartonger, gummiband, klisterm√§rken, tejp',
                            duration: '25 min'
                        },
                        {
                            name: 'Musikgissning',
                            description: 'Spela korta klipp av barnl√•tar och l√•t barnen gissa.',
                            instructions: 'F√∂rbered 10-15 popul√§ra barnl√•tar. Spela 5-10 sekunder av varje. Dela in i lag. F√∂rsta laget som gissar r√§tt f√•r po√§ng.',
                            materials: 'Bluetoothh√∂gtalare, f√∂rberett l√•tlista',
                            duration: '20 min'
                        }
                    ],
                    large: [
                        {
                            name: 'DJ-utmaning',
                            description: 'L√§r er grunderna i att mixa musik och skapa playlists.',
                            instructions: 'Anv√§nd Spotify eller gratis DJ-app (djay). L√§r grunderna: fade in/out, beatmatching, crossfading. Varje barn f√•r 3 minuter att "mixa" 2 l√•tar. Andra barnen dansar och ger feedback. Skapa gemensam "Kalas-playlist".',
                            materials: 'Telefon/tablet, DJ-app, h√∂rlur, Bluetoothh√∂gtalare',
                            duration: '30 min'
                        },
                        {
                            name: 'Skapa egen l√•t',
                            description: 'Komponera en enkel l√•t tillsammans med text och melodi.',
                            instructions: 'Dela in i grupper. Varje grupp skapar en vers om kalaset. Anv√§nd enkel melodi som "Blinka lilla stj√§rna". √ñva in och framf√∂r f√∂r varandra.',
                            materials: 'Papper, pennor, enkla instrument',
                            duration: '35 min'
                        }
                    ]
                },
                prinsessor: {
                    small: [
                        {
                            name: 'Prinsesskl√§dsel',
                            description: 'Kl√§ ut sig till prinsessor med tillbeh√∂r och accessoarer.',
                            instructions: 'L√§gg fram kl√§nningar, tiara, handskar, skor. Hj√§lp barnen kl√§ ut sig. Ta foton. L√•t dem g√• "catwalk" och posa som prinsessor.',
                            materials: 'Utkl√§dningskl√§der, tiaror, handskar, skor, kamera',
                            duration: '20 min'
                        }
                    ],
                    medium: [
                        {
                            name: 'G√∂r egna kronor',
                            description: 'Skapa personliga kronor med glitter och √§delstenar.',
                            instructions: 'Klipp ut kronmallar fr√•n kartong. Barnen dekorerar med glitter, klisterm√§rken, "√§delstenar". Anv√§nd lim och penslar. S√§tt fast gummiband.',
                            materials: 'Kartong, glitter, konstgjorda √§delstenar, lim, penslar, gummiband, klisterm√§rken',
                            duration: '25 min'
                        }
                    ],
                    large: [
                        {
                            name: 'Prinsessbal',
                            description: 'En riktig bal med dans, etikett och riddare.',
                            instructions: 'L√§r grundl√§ggande hovdans (vals, menuett). Pojkar kan vara riddare. √ñva artighetsfraser "Ers h√∂ghet", "F√•r jag lov att dansa?". Arrangera en bal med presentationer.',
                            materials: 'Klassisk musik, utkl√§dning, "hovmannakl√§der"',
                            duration: '30 min'
                        }
                    ]
                },
                fotboll: {
                    small: [
                        {
                            name: 'Fotbollsbowling',
                            description: 'Rull fotboll mot mjuka k√§glor.',
                            instructions: 'St√§ll upp mjuka k√§glor eller tomma plastflaskor. Barnen rullar fotboll och f√∂rs√∂ker knocka ner k√§glorna. Variera avst√•nd.',
                            materials: 'Mjuk fotboll, plastflaskor eller mjuka k√§glor',
                            duration: '15 min'
                        }
                    ],
                    medium: [
                        {
                            name: 'Hinderbana',
                            description: 'Fotbollshinderbana med dribling och m√•lskytte.',
                            instructions: 'S√§tt upp koner f√∂r dribling. L√§gg ut hoppband. Avsluta med skott p√• m√•l. Dela in i lag och t√§vla. Alla vinner n√•got.',
                            materials: 'Koner, hoppband, fotboll, sm√• m√•l eller kartongm√•l',
                            duration: '25 min'
                        }
                    ],
                    large: [
                        {
                            name: 'Mini-turnering',
                            description: 'Riktiga matcher med lag och slutspel.',
                            instructions: 'Dela in i lag med 3-4 spelare. Spela korta matcher (5 min). Gruppspel f√∂ljt av semifinal och final. Alla lag f√•r medaljer.',
                            materials: 'Fotboll, m√•l, koner, medaljer, tr√∂jor i olika f√§rger',
                            duration: '35 min'
                        }
                    ]
                }
            };

            return activities[theme] ? activities[theme][ageGroup] || activities[theme].medium : [];
        }

        function generateInvitation(theme) {
            const invitations = {
                musik: [
                    "üéµ V√§lkommen till ett kalas fyllt av rytmer, s√•ng och skratt! Kom och dansa loss med oss! üé∂",
                    "üé§ Hej musik-v√§nner! Vi bjuder in till ett kalas d√§r vi ska sjunga, dansa och ha det s√• kul! üéµ",
                    "üé∂ L√•t oss fira tillsammans med musik och dans! Ett kalas som kommer f√• alla att dansa! üï∫üíÉ"
                ],
                prinsessor: [
                    "üëë Du √§r inbjuden till en magisk prinsessbal! Kom i din finaste kl√§nning och l√•t oss fira som riktiga kungligheter! ‚ú®",
                    "üè∞ V√§lkommen till v√•rt sagoslott! Vi ska ha prinsessbal med dans, lek och magi! üë∏",
                    "üíé En kunglig inbjudan v√§ntar dig! Kom och fira som en riktig prinsessa eller prins! üëë"
                ],
                pyssel: [
                    "üé® Kom och skapa magi med oss! Ett kalas fyllt av pyssel, f√§rger och kreativitet v√§ntar! ‚úÇÔ∏è",
                    "üñåÔ∏è Alla konstn√§rer √§r v√§lkomna! Vi ska pyssla, m√•la och skapa tillsammans! üé®",
                    "‚úÇÔ∏è Tid f√∂r kreativitet! Kom med tomma h√§nder, g√• hem med konstverket du gjort! üé®"
                ],
                fotboll: [
                    "‚öΩ Fotbollskalas! Kom med fotbollsskor och gl√§dje - vi ska spela, springa och ha kul! ü•Ö",
                    "üèÜ V√§lkommen till fotbollsfest! Kom som du √§r och var redo f√∂r action p√• planen! ‚öΩ",
                    "‚öΩ Dags f√∂r fotboll och skoj! Ta med dig sporthum√∂ret och kom och fira med oss! üèÉ‚Äç‚ôÇÔ∏è"
                ]
            };

            const themeInvitations = invitations[theme] || [
                "üéâ Du √§r inbjuden till ett super-kul kalas! Kom och fira med oss! üéà"
            ];

            const invitation = themeInvitations[currentInvitationIndex % themeInvitations.length];
            
            const fullInvitation = `${invitation}

üìÖ Datum: [Datum]
üïê Tid: 14:00-16:30
üìç Plats: [Adress]
üéà √Ölder: ${formData.age} √•r
üë• Vi blir: ${formData.guestCount} barn

OSA till [telefonnummer] senast [datum]

Vi ses! üéä`;

            const html = `
                <div class="invitation-box">
                    <button class="copy-btn" onclick="copyInvitation()">Kopiera text</button>
                    <pre id="invitation-text">${fullInvitation}</pre>
                </div>
                <button style="background: #007bff; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px;" onclick="generateNewInvitation('${theme}')">
                    üîÑ Generera ny inbjudan
                </button>
            `;
            
            document.getElementById('invitation-content').innerHTML = html;
        }

        function generateNewInvitation(theme) {
            currentInvitationIndex++;
            generateInvitation(theme);
        }

        function copyInvitation() {
            const text = document.getElementById('invitation-text').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Kopierat! ‚úÖ';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        function generateFoodSuggestions(theme, budget) {
            const foods = {
                musik: {
                    lag: [
                        { name: 'Musiknot-sm√∂rg√•sar', description: 'Sm√∂rg√•sar klippta som musiknoter', price: 'üí∞', cost: '~80 kr' },
                        { name: 'Rytm-popcorn', description: 'Hemgjord popcorn i musiktemat', price: 'üí∞', cost: '~40 kr' }
                    ],
                    medel: [
                        { name: 'Xylofon-fruktfat', description: 'Frukt arrangerat som xylofon i f√§rgordning', price: 'üí∏', cost: '~150 kr' },
                        { name: 'Musiknot-muffins', description: 'Cupcakes med musiknoter i glasyr', price: 'üí∏', cost: '~120 kr' }
                    ],
                    hog: [
                        { name: 'DJ-t√•rta med chokladskivor', description: 'Professionell t√•rta designad som DJ-bord', price: 'üíé', cost: '~400 kr' },
                        { name: 'Smoothie-bar med musik', description: 'F√§rgglada smoothies serverade med musik', price: 'üíé', cost: '~300 kr' }
                    ]
                },
                prinsessor: {
                    lag: [
                        { name: 'Prinsess-sm√∂rg√•sar', description: 'Sm√∂rg√•sar i kronform', price: 'üí∞', cost: '~90 kr' },
                        { name: 'Rosa popcorn', description: 'Hemgjord rosa popcorn', price: 'üí∞', cost: '~50 kr' }
                    ],
                    medel: [
                        { name: 'Prinsess-cupcakes', description: 'Rosa cupcakes med kronor och glitter', price: 'üí∏', cost: '~140 kr' },
                        { name: 'Kunglig fruktdryck', description: 'Rosa lemonad med glitter', price: 'üí∏', cost: '~100 kr' }
                    ],
                    hog: [
                        { name: 'Slottst√•rta', description: 'T√•rta formad som ett slott', price: 'üíé', cost: '~500 kr' },
                        { name: 'Afternoon tea f√∂r barn', description: 'Minipajer, scones och te-koppar', price: 'üíé', cost: '~350 kr' }
                    ]
                }
            };

            const budgetFoods = foods[theme] ? foods[theme][budget] || foods[theme].medel : [
                { name: 'Temaanpassade snacks', description: 'Enkla snacks anpassade efter temat', price: 'üí∞', cost: '~100 kr' }
            ];

            let html = '';
            budgetFoods.forEach(food => {
                html += `
                    <div class="food-item">
                        <div>
                            <div style="font-weight: bold;">${food.name}</div>
                            <div style="color: #666; font-size: 0.9rem;">${food.description}</div>
                            <div style="color: #888; font-size: 0.8rem;">${food.cost}</div>
                        </div>
                        <div class="price-tag">${food.price}</div>
                    </div>
                `;
            });
            
            document.getElementById('food-content').innerHTML = html;
        }

        function generateAccessories(theme, budget) {
            const accessories = {
                musik: {
                    lag: [
                        { name: 'Musiknot-ballonger', description: 'Svarta ballonger med vita musiknoter', price: 'üí∞', store: 'Panduro eller Dollarstore', cost: '~60 kr' },
                        { name: 'Hem-DJ-station', description: 'Kartong gjord till DJ-bord', price: 'üí∞', store: 'Hemmagjord av kartonger', cost: '~20 kr' }
                    ],
                    medel: [
                        { name: 'Mini-discolampa', description: 'LED-lampa som projicerar f√§rger', price: 'üí∏', store: 'Elgiganten eller Clas Ohlson', cost: '~150 kr' },
                        { name: 'Karaoke-mikrofon', description: 'Bluetooth-mikrofon f√∂r karaoke', price: 'üí∏', store: 'Media Markt', cost: '~200 kr' }
                    ],
                    hog: [
                        { name: 'Professionell DJ-utrustning', description: 'Hyra av riktigt DJ-bord', price: 'üíé', store: 'Hyra fr√•n Ljudia', cost: '~400 kr/dag' },
                        { name: 'Live-band f√∂r barn', description: 'Musikband som spelar barnmusik', price: 'üíé', store: 'Booka via Barnunderh√•llning.se', cost: '~800 kr' }
                    ]
                }
            };

            const budgetAccessories = accessories[theme] ? accessories[theme][budget] || accessories[theme].medel : [
                { name: 'Temaballonger', description: 'Ballonger i temats f√§rger', price: 'üí∞', store: 'Panduro', cost: '~50 kr' }
            ];

            let html = '';
            budgetAccessories.forEach(item => {
                html += `
                    <div class="accessories-item">
                        <div style="font-weight: bold; margin-bottom: 8px;">${item.name}</div>
                        <div style="color: #666; margin-bottom: 5px;">${item.description}</div>
                        <div style="font-size: 0.9rem; color: #888;">üìç ${item.store}</div>
                        <div style="font-size: 0.9rem; color: #888;">üí∞ ${item.cost}</div>
                        <div style="margin-top: 5px;">${item.price}</div>
                    </div>
                `;
            });
            
            document.getElementById('accessories-content').innerHTML = html;
        }

        function showPremiumModal() {
            document.getElementById('premium-modal').classList.remove('hidden');
        }

        function closePremiumModal() {
            document.getElementById('premium-modal').classList.add('hidden');
        }

        function upgradeToPremium() {
            // Simulate premium upgrade
            localStorage.setItem('kalaskollen-premium', 'true');
            isPremium = true;
            updatePremiumAccess();
            closePremiumModal();
            
            // Show success message
            alert('Grattis! Du har nu Kalaskollen Premium! üéâ\nAlla teman √§r nu uppl√•sta!');
        }

        function updatePremiumAccess() {
            if (isPremium) {
                document.querySelectorAll('.interest-card.premium').forEach(card => {
                    card.classList.remove('premium');
                    const lockIcon = card.querySelector('.lock-icon');
                    if (lockIcon) {
                        lockIcon.remove();
                    }
                });
            }
        }

        function resetForm() {
            // Reset form data
            formData = {
                age: '',
                theme: '',
                guestCount: '',
                budget: '',
                location: '',
                foodPrefs: ''
            };
            
            // Reset form fields
            document.getElementById('age').value = '';
            document.getElementById('guestCount').value = '';
            document.getElementById('foodPrefs').value = '';
            
            // Reset selections
            document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
            document.getElementById('theme-confirmation').classList.add('hidden');
            
            // Reset validation
            validateForm();
            
            // Show form
            document.getElementById('results-container').classList.add('hidden');
            document.getElementById('form-container').classList.remove('hidden');
            
            // Reset invitation index
            currentInvitationIndex = 0;
        }
    </script>
</body>
</html>