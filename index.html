<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalaskollen</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
        }
        .logo {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .tagline {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 5px;
        }
        .subtitle {
            color: #888;
        }
        .form-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }
        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        .input-field:focus {
            outline: none;
            border-color: #ff6b6b;
        }
        .interests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .interest-card {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
        }
        .interest-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .interest-card.selected {
            border-color: #ff6b6b;
            background: #ffe5e5;
        }
        .interest-card.premium {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .interest-card.premium .lock-icon {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1rem;
        }
        .interest-emoji {
            font-size: 2rem;
            margin-bottom: 8px;
            display: block;
        }
        .interest-name {
            font-weight: 600;
            font-size: 0.9rem;
        }
        .theme-categories {
            margin-bottom: 20px;
        }
        .category-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 2px solid #eee;
        }
        .free-themes {
            color: #28a745;
        }
        .premium-themes {
            color: #6f42c1;
        }
        .budget-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .budget-card {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        .budget-card:hover {
            transform: translateY(-2px);
        }
        .budget-card.selected {
            border-color: #ff6b6b;
            background: #ffe5e5;
        }
        .location-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        .location-card {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        .location-card:hover {
            transform: translateY(-2px);
        }
        .location-card.selected {
            border-color: #ff6b6b;
            background: #ffe5e5;
        }
        .submit-btn {
            width: 100%;
            padding: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
        }
        .submit-btn.enabled {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
        }
        .submit-btn.enabled:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .submit-btn.disabled {
            background: #ccc;
            color: #666;
            cursor: not-allowed;
        }
        .loading {
            text-align: center;
            padding: 60px 20px;
        }
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #ff6b6b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .results {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .result-section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #ff6b6b;
        }
        .result-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }
        .activity-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .activity-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        .activity-description {
            color: #666;
            margin-bottom: 10px;
            line-height: 1.5;
        }
        .activity-instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2196f3;
        }
        .activity-materials {
            background: #f3e5f5;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.9rem;
        }
        .activity-duration {
            color: #ff6b6b;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .invitation-box {
            background: #fff3cd;
            border: 2px dashed #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
        }
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 0.8rem;
        }
        .copy-btn:hover {
            background: #218838;
        }
        .food-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .price-tag {
            font-size: 1.2rem;
        }
        .accessories-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .new-party-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            width: 100%;
        }
        .new-party-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .premium-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .premium-modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            margin: 20px;
        }
        .premium-modal h3 {
            color: #6f42c1;
            margin-bottom: 20px;
        }
        .premium-features {
            text-align: left;
            margin: 20px 0;
        }
        .premium-features li {
            margin-bottom: 10px;
            color: #28a745;
        }
        .upgrade-btn {
            background: linear-gradient(45deg, #6f42c1, #e83e8c);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
        }
        .close-modal-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        .confirmation-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #c3e6cb;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 768px) {
            .interests-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .budget-grid {
                grid-template-columns: 1fr;
            }
            .location-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">🎉 Kalaskollen</div>
            <div class="tagline">Föräldralugnet börjar här.</div>
            <div class="subtitle">Din AI-assistent för det perfekta barnkalaset</div>
        </div>

        <!-- Form -->
        <div id="form-container">
            <div class="form-section">
                <div class="section-title">🎂 Barnets ålder</div>
                <input type="number" class="input-field" id="age" placeholder="Ange ålder..." min="1" max="18">
            </div>

            <div class="form-section">
                <div class="section-title">❤️ Barnets intressen</div>
                <div class="theme-categories">
                    <div class="category-header free-themes">🆓 Gratis teman</div>
                    <div class="interests-grid" id="free-themes">
                        <div class="interest-card" data-theme="musik">
                            <span class="interest-emoji">🎵</span>
                            <div class="interest-name">Musik</div>
                        </div>
                        <div class="interest-card" data-theme="prinsessor">
                            <span class="interest-emoji">👑</span>
                            <div class="interest-name">Prinsessor</div>
                        </div>
                        <div class="interest-card" data-theme="pyssel">
                            <span class="interest-emoji">🎨</span>
                            <div class="interest-name">Pyssel</div>
                        </div>
                        <div class="interest-card" data-theme="fotboll">
                            <span class="interest-emoji">⚽</span>
                            <div class="interest-name">Fotboll</div>
                        </div>
                        <div class="interest-card" data-theme="superhjaltar">
                            <span class="interest-emoji">🦸</span>
                            <div class="interest-name">Superhjältar</div>
                        </div>
                    </div>

                    <div class="category-header premium-themes">🔒 Premium teman</div>
                    <div class="interests-grid" id="premium-themes">
                        <div class="interest-card premium" data-theme="minecraft">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">⛏️</span>
                            <div class="interest-name">Minecraft</div>
                        </div>
                        <div class="interest-card premium" data-theme="dans">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">💃</span>
                            <div class="interest-name">Dans</div>
                        </div>
                        <div class="interest-card premium" data-theme="bilar">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">🚗</span>
                            <div class="interest-name">Bilar</div>
                        </div>
                        <div class="interest-card premium" data-theme="djur">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">🐨</span>
                            <div class="interest-name">Djur</div>
                        </div>
                        <div class="interest-card premium" data-theme="rymden">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">🚀</span>
                            <div class="interest-name">Rymden</div>
                        </div>
                        <div class="interest-card premium" data-theme="hastar">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">🐴</span>
                            <div class="interest-name">Hästar</div>
                        </div>
                        <div class="interest-card premium" data-theme="poliser">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">👮</span>
                            <div class="interest-name">Poliser</div>
                        </div>
                        <div class="interest-card premium" data-theme="dinosaurier">
                            <span class="lock-icon">🔒</span>
                            <span class="interest-emoji">🦕</span>
                            <div class="interest-name">Dinosaurier</div>
                        </div>
                    </div>
                </div>
                <div id="theme-confirmation" class="confirmation-message hidden"></div>
            </div>

            <div class="form-section">
                <div class="section-title">👥 Antal barn som bjuds</div>
                <input type="number" class="input-field" id="guestCount" placeholder="Antal barn..." min="1" max="30">
            </div>

            <div class="form-section">
                <div class="section-title">💰 Budget</div>
                <div class="budget-grid">
                    <div class="budget-card" data-budget="lag">
                        <div style="font-size: 2rem; margin-bottom: 10px;">💰</div>
                        <div style="font-weight: bold;">Låg budget</div>
                        <div style="color: #666;">300-500 kr</div>
                    </div>
                    <div class="budget-card" data-budget="medel">
                        <div style="font-size: 2rem; margin-bottom: 10px;">💸</div>
                        <div style="font-weight: bold;">Medel budget</div>
                        <div style="color: #666;">500-1000 kr</div>
                    </div>
                    <div class="budget-card" data-budget="hog">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🏆</div>
                        <div style="font-weight: bold;">Hög budget</div>
                        <div style="color: #666;">1000+ kr</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">📍 Var ska kalaset hållas?</div>
                <div class="location-grid">
                    <div class="location-card" data-location="hemma">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🏠</div>
                        <div style="font-weight: bold;">Hemma</div>
                    </div>
                    <div class="location-card" data-location="utomhus">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🌳</div>
                        <div style="font-weight: bold;">Utomhus</div>
                    </div>
                    <div class="location-card" data-location="lokal">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🏢</div>
                        <div style="font-weight: bold;">I lokal</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">🍽️ Matpreferenser (valfritt)</div>
                <textarea class="input-field" id="foodPrefs" placeholder="T.ex. vegetariskt, allergier..." rows="3"></textarea>
            </div>

            <button class="submit-btn disabled" id="submit-btn">
                ✨ Skapa mitt drömkalas! 🎉
            </button>
        </div>

        <!-- Loading -->
        <div id="loading-container" class="hidden">
            <div class="loading">
                <div class="loading-spinner"></div>
                <h2>Skapar ditt perfekta kalas... ✨</h2>
                <div style="color: #666;">
                    <p>🎨 Väljer tema...</p>
                    <p>🎲 Planerar aktiviteter...</p>
                    <p>🧁 Förbereder meny...</p>
                </div>
            </div>
        </div>

        <!-- Results -->
        <div id="results-container" class="hidden">
            <div class="results">
                <h1 style="text-align: center; color: #333; margin-bottom: 40px;">🎉 Ditt drömkalas är klart!</h1>
                
                <div class="result-section">
                    <h3 id="theme-title">🎈 Tema</h3>
                    <div id="theme-content"></div>
                </div>

                <div class="result-section">
                    <h3>🎲 Lekförslag</h3>
                    <div id="activities-content"></div>
                </div>

                <div class="result-section">
                    <h3>💌 Inbjudningstext</h3>
                    <div id="invitation-content"></div>
                </div>

                <div class="result-section">
                    <h3>🧁 Fika & matförslag</h3>
                    <div id="food-content"></div>
                </div>

                <div class="result-section">
                    <h3>🛍️ Tillbehör & dekorationer</h3>
                    <div id="accessories-content"></div>
                </div>

                <button class="new-party-btn" onclick="resetForm()">← Planera nytt kalas</button>
            </div>
        </div>

        <!-- Premium Modal -->
        <div id="premium-modal" class="premium-modal hidden">
            <div class="premium-modal-content">
                <h3>🔒 Detta tema ingår i Kalaskollen Premium</h3>
                <p>Lås upp fler teman, extra AI-innehåll och obegränsade inbjudningar.</p>
                <ul class="premium-features">
                    <li>✅ Tillgång till alla teman</li>
                    <li>✅ Extra lekar, inbjudningar och fikaidéer</li>
                    <li>✅ Obegränsat antal SMS/mail</li>
                    <li>✅ Prioritetsupport</li>
                </ul>
                <button class="upgrade-btn" onclick="upgradeToPremium()">Uppgradera till Premium</button>
                <button class="close-modal-btn" onclick="closePremiumModal()">Stäng</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let formData = {
            age: '',
            theme: '',
            guestCount: '',
            budget: '',
            location: '',
            foodPrefs: ''
        };

        let isPremium = localStorage.getItem('kalaskollen-premium') === 'true';
        let currentInvitationIndex = 0;

        // Premium themes
        const premiumThemes = ['minecraft', 'dans', 'bilar', 'djur', 'rymden', 'hastar', 'poliser', 'dinosaurier'];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            updatePremiumAccess();
        });

        function initializeEventListeners() {
            // Age input
            document.getElementById('age').addEventListener('input', function(e) {
                formData.age = e.target.value;
                validateForm();
            });

            // Guest count input
            document.getElementById('guestCount').addEventListener('input', function(e) {
                formData.guestCount = e.target.value;
                validateForm();
            });

            // Food preferences
            document.getElementById('foodPrefs').addEventListener('input', function(e) {
                formData.foodPrefs = e.target.value;
            });

            // Theme selection
            document.querySelectorAll('.interest-card').forEach(card => {
                card.addEventListener('click', function() {
                    const theme = this.dataset.theme;
                    const isPremiumTheme = premiumThemes.includes(theme);
                    
                    if (isPremiumTheme && !isPremium) {
                        showPremiumModal();
                        return;
                    }
                    
                    selectTheme(theme);
                });
            });

            // Budget selection
            document.querySelectorAll('.budget-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.budget-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    formData.budget = this.dataset.budget;
                    validateForm();
                });
            });

            // Location selection
            document.querySelectorAll('.location-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.location-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    formData.location = this.dataset.location;
                    validateForm();
                });
            });

            // Submit button
            document.getElementById('submit-btn').addEventListener('click', function() {
                if (isFormValid()) {
                    generateParty();
                }
            });
        }

        function selectTheme(theme) {
            document.querySelectorAll('.interest-card').forEach(c => c.classList.remove('selected'));
            document.querySelector(`[data-theme="${theme}"]`).classList.add('selected');
            formData.theme = theme;
            
            const confirmation = document.getElementById('theme-confirmation');
            const emoji = document.querySelector(`[data-theme="${theme}"] .interest-emoji`).textContent;
            const name = document.querySelector(`[data-theme="${theme}"] .interest-name`).textContent;
            
            confirmation.textContent = `Temat ${emoji} ${name} är valt! AI:n anpassar nu lekar, inbjudningar och kalasidéer.`;
            confirmation.classList.remove('hidden');
            
            validateForm();
        }

        function validateForm() {
            const isValid = formData.age && formData.theme && formData.guestCount && formData.budget && formData.location;
            const submitBtn = document.getElementById('submit-btn');
            
            if (isValid) {
                submitBtn.classList.remove('disabled');
                submitBtn.classList.add('enabled');
            } else {
                submitBtn.classList.remove('enabled');
                submitBtn.classList.add('disabled');
            }
        }

        function isFormValid() {
            return formData.age && formData.theme && formData.guestCount && formData.budget && formData.location;
        }

        function generateParty() {
            document.getElementById('form-container').classList.add('hidden');
            document.getElementById('loading-container').classList.remove('hidden');

            setTimeout(() => {
                generateContent();
                document.getElementById('loading-container').classList.add('hidden');
                document.getElementById('results-container').classList.remove('hidden');
            }, 3000);
        }

        function generateContent() {
            const age = parseInt(formData.age);
            const theme = formData.theme;
            const budget = formData.budget;
            
            // Generate theme content
            generateThemeContent(theme);
            
            // Generate activities
            generateActivities(theme, age);
            
            // Generate invitation
            generateInvitation(theme);
            
            // Generate food suggestions
            generateFoodSuggestions(theme, budget);
            
            // Generate accessories
            generateAccessories(theme, budget);
        }

        function generateThemeContent(theme) {
            const themes = {
                musik: {
                    name: 'Musikalisk magi',
                    description: 'Ett rytmiskt kalas fyllt av musik, dans och kreativitet där barnen får utforska ljud och melodier!',
                    emoji: '🎵'
                },
                prinsessor: {
                    name: 'Magisk prinsessbal',
                    description: 'Ett kungligt kalas med glitter, kronor och äventyr i sagolandet!',
                    emoji: '👑'
                },
                pyssel: {
                    name: 'Kreativa verkstan',
                    description: 'Ett kalas där fantasin får flöda fritt genom pysslande och skapande!',
                    emoji: '🎨'
                },
                fotboll: {
                    name: 'Fotbollsfest',
                    description: 'Ett energifyllt kalas med fotbollsaktiviteter och lagkänsla!',
                    emoji: '⚽'
                },
                superhjaltar: {
                    name: 'Superhjälte akademi',
                    description: 'Träna era superkrafter och rädda världen tillsammans!',
                    emoji: '🦸'
                },
                minecraft: {
                    name: 'Blocky builder adventure',
                    description: 'Bygg, utforska och skapa i Minecraft-världen!',
                    emoji: '⛏️'
                },
                dans: {
                    name: 'Dansparti deluxe',
                    description: 'Ett energifyllt kalas med dans, musik och show!',
                    emoji: '💃'
                },
                bilar: {
                    name: 'Racing championship',
                    description: 'Kör fort och ha kul med bilar och racing!',
                    emoji: '🚗'
                },
                djur: {
                    name: 'Djuräventyr',
                    description: 'Utforska djurriket och lär er om olika djur!',
                    emoji: '🐨'
                },
                rymden: {
                    name: 'Rymdäventyr',
                    description: 'Res till rymden och utforska planeter och stjärnor!',
                    emoji: '🚀'
                },
                hastar: {
                    name: 'Häst och ridning',
                    description: 'Allt om hästar, ridning och stalliv!',
                    emoji: '🐴'
                },
                poliser: {
                    name: 'Polisstation',
                    description: 'Lös mysterier och håll ordning som riktiga poliser!',
                    emoji: '👮'
                },
                dinosaurier: {
                    name: 'Jurassic adventure',
                    description: 'Upptäck dinosauriernas värld och bli paleontologer!',
                    emoji: '🦕'
                }
            };

            const themeData = themes[theme];
            const content = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 4rem; margin-bottom: 15px;">${themeData.emoji}</div>
                    <h2 style="color: #ff6b6b; margin-bottom: 10px;">${themeData.name}</h2>
                    <p style="font-size: 1.1rem; color: #666;">${themeData.description}</p>
                </div>
            `;
            
            document.getElementById('theme-content').innerHTML = content;
            document.getElementById('theme-title').innerHTML = `${themeData.emoji} ${themeData.name}`;
        }

        function generateActivities(theme, age) {
            const activities = getActivitiesForTheme(theme, age, formData.location);
            
            let html = '';
            activities.forEach(activity => {
                html += `
                    <div class="activity-item">
                        <div class="activity-name">${activity.name}</div>
                        <div class="activity-description">${activity.description}</div>
                        <div class="activity-instructions">
                            <strong>📋 Instruktioner:</strong><br>
                            ${activity.instructions}
                        </div>
                        <div class="activity-materials">
                            <strong>🛠️ Material:</strong> ${activity.materials}
                        </div>
                        <div class="activity-duration">⏱️ ${activity.duration}</div>
                    </div>
                `;
            });
            
            document.getElementById('activities-content').innerHTML = html;
        }

        function getActivitiesForTheme(theme, age, location) {
            const ageGroup = age <= 5 ? 'small' : age <= 8 ? 'medium' : 'large';
            
            const activities = {
                musik: {
                    small: {
                        hemma: [
                            {
                                name: 'Musikstopp inomhus',
                                description: 'När musiken stannar fryser alla i roliga poser.',
                                instructions: 'Spela musik från telefon/tablet. Barnen dansar fritt i vardagsrummet. Pausa musiken oväntat. Alla måste frysa. Den som rör sig får ge nästa pose-förslag.',
                                materials: 'Bluetoothhögtalare eller telefon',
                                duration: '15 min'
                            },
                            {
                                name: 'Djurljud-dans',
                                description: 'Barn imiterar olika djur till musik och dansar som djuren gör.',
                                instructions: 'Spela lugn musik och ropa ut olika djur. Barnen dansar och låter som djuret. Växla mellan katt, elefant, fågel. Perfekt för vardagsrum.',
                                materials: 'Bluetoothhögtalare, lista på djur',
                                duration: '15 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Musikparad utomhus',
                                description: 'Marschera runt i trädgården med hemmagjorda instrument.',
                                instructions: 'Gör enkla instrument (skramla i burkar, tamburin av papptallrikar). Marschera i kö runt trädgården till musik. Barnen turas om att leda paraden.',
                                materials: 'Burkar, ris, papptallrikar, tejp, portabel högtalare',
                                duration: '20 min'
                            },
                            {
                                name: 'Naturens musik',
                                description: 'Upptäck ljud i naturen och skapa musik med naturmaterial.',
                                instructions: 'Samla pinnar, stenar, löv. Experimentera med ljud - klappa pinnar, raschla löv, släppa stenar i hinkar. Skapa "naturorkester".',
                                materials: 'Hinkar, naturmaterial, portabel högtalare',
                                duration: '25 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Stor musikcirkel',
                                description: 'Alla sitter i stor cirkel och sjunger tillsammans.',
                                instructions: 'Stora lokalen ger plats för stor cirkel. Sjung bekanta barnvisor. Använd enkla rörelser. Låt barnen föreslå låtar.',
                                materials: 'Ljudanläggning i lokalen, sångbok',
                                duration: '20 min'
                            }
                        ]
                    },
                    medium: {
                        hemma: [
                            {
                                name: 'Hemmagjorda instrument-verkstad',
                                description: 'Tillverka riktiga instrument av återvinning i köket.',
                                instructions: 'Station vid köksbordet: Maracas av tomma yoghurtburkar + ris. Gitarrer av skokartonger + gummiband. Trummor av konservburkar + ballonger som trumskinn.',
                                materials: 'Yoghurtburkar, ris, skokartonger, gummiband, konservburkar, ballonger',
                                duration: '30 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Utomhus-karaoke',
                                description: 'Karaoke i trädgården med naturlig akustik.',
                                instructions: 'Sätt upp portabel karaoke-högtalare. Skapa "scen" med filt eller matta. Barnen turas om att sjunga favoritlåtar. Andra sitter på gräset och hejar.',
                                materials: 'Karaoke-högtalare, mikrofon, filt, förlängningssladd',
                                duration: '25 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Stor musikproduktion',
                                description: 'Skapa musikal med roller och dans.',
                                instructions: 'Dela in i grupper: sångare, dansare, instrument. Öva in enkel musikal baserat på bekant saga. Framför för varandra i lokalens stora utrymme.',
                                materials: 'Lokalens ljudsystem, enkla kostymer, rekvisita',
                                duration: '35 min'
                            }
                        ]
                    },
                    large: {
                        hemma: [
                            {
                                name: 'Hemma-DJ-studio',
                                description: 'Lär grunderna i DJ-mixning hemma vid datorn.',
                                instructions: 'Använd gratis DJ-app på dator/tablet. Lär fade in/out, beatmatching. Varje barn får 3 min att "mixa". Andra lyssnar via hörlurar och ger feedback.',
                                materials: 'Dator/tablet, DJ-app, hörlurar, Bluetooth-högtalare',
                                duration: '30 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Utomhus-dansfest',
                                description: 'Stor dansfest i trädgården med ljud och ljus.',
                                instructions: 'Sätt upp kraftig musikanläggning utomhus. Skapa dansområde på gräs/terass. Lägg till disco-ljus om det är kväll. Arrangera danskonkurrens.',
                                materials: 'Kraftig högtalare, förlängningssladd, disco-ljus, ljudlista',
                                duration: '40 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Professionell musikstudio',
                                description: 'Använd lokalens utrustning för att spela in egen låt.',
                                instructions: 'Om lokalen har bra ljudsystem, spela in gemensam låt. Dela roller: rappare, sångare, beatbox. Spela in med telefon. Lyssna på resultatet tillsammans.',
                                materials: 'Lokalens ljudsystem, telefon för inspelning, mikrofoner',
                                duration: '45 min'
                            }
                        ]
                    }
                },
                fotboll: {
                    small: {
                        hemma: [
                            {
                                name: 'Fotbollsbowling inomhus',
                                description: 'Rulla mjuk fotboll mot plastflaskor i korridoren.',
                                instructions: 'Ställ upp tomma plastflaskor i korridoren eller vardagsrummet. Använd mjuk inomhusboll. Barnen rullar bollen försiktigt mot "käglorna".',
                                materials: 'Mjuk inomhusboll, 6-10 plastflaskor',
                                duration: '15 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Mini-fotbollsmatch',
                                description: 'Äkta fotboll på gräsmattan med små mål.',
                                instructions: 'Sätt upp små mål (köp eller improvisera med koner). Spela 2 mot 2 eller 3 mot 3. Korta matcher (5 min). Alla får vara målvakt.',
                                materials: 'Fotboll, små mål eller koner, eventuellt nätverk',
                                duration: '25 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Inomhusfotboll med mjuka bollar',
                                description: 'Fotboll i stor lokal med säkra mjuka bollar.',
                                instructions: 'Använd mjuka skumbollar eller ballonger. Markera mål med tejp på vägg. Spela försiktigt för att inte skada inredning.',
                                materials: 'Mjuka skumbollar, tejp för målmarkering',
                                duration: '20 min'
                            }
                        ]
                    },
                    medium: {
                        hemma: [
                            {
                                name: 'Fotbollsskicklighetstävling',
                                description: 'Tekniktävling i trädgården med hinderbanor.',
                                instructions: 'Sätt upp koner för dribling. Skjut på små mål från olika avstånd. Jonglering-utmaning. Tidstagning för varje station.',
                                materials: 'Fotboll, koner, små mål, tidtagarur',
                                duration: '30 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Fotbollsolympiad',
                                description: 'Flera fotbollsstationer utomhus med olika utmaningar.',
                                instructions: 'Station 1: Målskytte. Station 2: Dribling. Station 3: Inlägg. Station 4: Straff. Rotera mellan stationer. Alla vinner medaljer.',
                                materials: 'Fotbollar, koner, mål, medaljer, station-skyltar',
                                duration: '35 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Inomhus-fotbollsturnering',
                                description: 'Organiserad turnering i stor lokal med lag.',
                                instructions: 'Dela in i lag. Spela korta matcher (7 min). Gruppspel följt av semifinal och final. Använd mindre bollar för inomhusytan.',
                                materials: 'Inomhusbollar, mål, domarvissla, poängtavla',
                                duration: '40 min'
                            }
                        ]
                    },
                    large: {
                        hemma: [
                            {
                                name: 'Fotbollsstrategi och analys',
                                description: 'Lär fotbollstaktik och träna avancerade tekniker.',
                                instructions: 'Rita upp taktik på whiteboard. Öva formationer. Diskutera professionella spelare. Kombinera teori med praktik i trädgården.',
                                materials: 'Whiteboard, pennor, fotboll, koner för formationer',
                                duration: '35 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Fullskalig fotbollsmatch',
                                description: 'Riktig 11-manna fotboll (anpassat efter antal barn).',
                                instructions: 'Organisera riktig match med regler, domare, byten. Spela två halvlekar (15 min var). Alla får spela olika positioner.',
                                materials: 'Fotboll, stora mål, domarvissla, positionsband',
                                duration: '45 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Futsal-turnering',
                                description: 'Professionell inomhusturnering med futsal-regler.',
                                instructions: 'Lär futsal-regler (mindre lag, bouncing ball). Organisera professionell turnering med slutspel. Tidstagning och poängräkning.',
                                materials: 'Futsal-boll, inomhusmål, tidtagarur, resultattavla',
                                duration: '50 min'
                            }
                        ]
                    }
                },
                prinsessor: {
                    small: {
                        hemma: [
                            {
                                name: 'Prinsessklädsel hemma',
                                description: 'Klä ut sig till prinsessor med föräldrarnas kläder.',
                                instructions: 'Använd föräldrarnas gamla kläder, smycken, skor. Hjälp barnen klä ut sig. Ta foton framför hemmets finaste bakgrund (trappa, bokhylla).',
                                materials: 'Utklädningskläder, smycken, skor, kamera/telefon',
                                duration: '20 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Prinsess-trädgårdsäventyr',
                                description: 'Leta efter "ädelstenar" och magiska ting i trädgården.',
                                instructions: 'Gömma glittriga stenar, plast-ädelstenar i trädgården. Prinsessorna letar skatter. Skapa sagomiljö bland blommor och träd.',
                                materials: 'Plastädelstenar, glitter, små hinkar för "skatter"',
                                duration: '25 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Stort prinsessslott',
                                description: 'Förvandla lokalen till ett slott med rum för olika aktiviteter.',
                                instructions: 'Dela lokalen i "rum": sovrum, balsal, thronssal. Låt prinsessorna utforska och leka rollspel i olika delar.',
                                materials: 'Slottdekorationer, skyltar för olika rum',
                                duration: '30 min'
                            }
                        ]
                    },
                    medium: {
                        hemma: [
                            {
                                name: 'Prinsess-sminkning hemma',
                                description: 'Sminka varandra som prinsessor vid badrumsspegeln.',
                                instructions: 'Använd ansiktsfärger och glitter. Sätt upp station vid badrumsbordet. Hjälp barnen sminka varandra. Ta innan/efter-foton.',
                                materials: 'Ansiktsfärger, glitter, borstar, våtservetter',
                                duration: '25 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Prinsessäventyr i skogen',
                                description: 'Äventyr utomhus där prinsessorna rädder djur och löser gåtor.',
                                instructions: 'Skapa äventyrsresa i trädgården/skogen. Olika stationer med utmaningar: rädda enhörning, lösa trollgåta, hitta magisk blomma.',
                                materials: 'Leksaksdjur, gåtor utskrivna, "magiska" föremål',
                                duration: '35 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Kunglig hovbal',
                                description: 'Organisera riktig bal med dans och etikett i stor lokal.',
                                instructions: 'Lär hovdans och artighetsfraser. Arrangera bal med presentationer, dans, kunglig middag. Använd lokalens utrymme för stor dansyta.',
                                materials: 'Klassisk musik, utklädning, "hovmannakläder", lokalens ljudsystem',
                                duration: '40 min'
                            }
                        ]
                    },
                    large: {
                        hemma: [
                            {
                                name: 'Prinsess-designer workshop',
                                description: 'Designa och sy egna prinsessklänningar hemma.',
                                instructions: 'Använd tygrester, tyll, band. Skapa enkla klänningar eller kjolar. Lär grundläggande sömnad. Modenschau hemma i vardagsrummet.',
                                materials: 'Tyg, tyll, band, säkerhetsnålar, sax, symaskinshjälp från vuxen',
                                duration: '45 min'
                            }
                        ],
                        utomhus: [
                            {
                                name: 'Episkt prinsessäventyr',
                                description: 'Stort äventyr med quests, dragar och riddare utomhus.',
                                instructions: 'Skapa äventyrsberättelse med flera kapitel. Olika platser i trädgård/område = olika länder. Lös komplexa utmaningar, rädda kungariket.',
                                materials: 'Kartunderlag, komplexa gåtor, kostymer för rollspel',
                                duration: '60 min'
                            }
                        ],
                        lokal: [
                            {
                                name: 'Prinsess-teaterproduktion',
                                description: 'Skriv och framför egen prinsess-pjäs.',
                                instructions: 'Skriv manus tillsammans. Dela roller: prinsessor, riddare, troll. Öva replik och rörelser. Framför för publik i lokalens stora utrymme.',
                                materials: 'Papper för manus, kostymer, rekvisita, lokalens scen-möjligheter',
                                duration: '50 min'
                            }
                        ]
                    }
                }
            };

            const themeActivities = activities[theme];
            if (!themeActivities) return [];
            
            const ageActivities = themeActivities[ageGroup];
            if (!ageActivities) return [];
            
            const locationActivities = ageActivities[location];
            return locationActivities || ageActivities.hemma || [];
        }

        function generateInvitation(theme) {
            const invitations = {
                musik: [
                    "🎵 Välkommen till ett kalas fyllt av rytmer, sång och skratt! Kom och dansa loss med oss! 🎶",
                    "🎤 Hej musik-vänner! Vi bjuder in till ett kalas där vi ska sjunga, dansa och ha det så kul! 🎵",
                    "🎶 Låt oss fira tillsammans med musik och dans! Ett kalas som kommer få alla att dansa! 🕺💃"
                ],
                prinsessor: [
                    "👑 Du är inbjuden till en magisk prinsessbal! Kom i din finaste klänning och låt oss fira som riktiga kungligheter! ✨",
                    "🏰 Välkommen till vårt sagoslott! Vi ska ha prinsessbal med dans, lek och magi! 👸",
                    "💎 En kunglig inbjudan väntar dig! Kom och fira som en riktig prinsessa eller prins! 👑"
                ],
                pyssel: [
                    "🎨 Kom och skapa magi med oss! Ett kalas fyllt av pyssel, färger och kreativitet väntar! ✂️",
                    "🖌️ Alla konstnärer är välkomna! Vi ska pyssla, måla och skapa tillsammans! 🎨",
                    "✂️ Tid för kreativitet! Kom med tomma händer, gå hem med konstverket du gjort! 🎨"
                ],
                fotboll: [
                    "⚽ Fotbollskalas! Kom med fotbollsskor och glädje - vi ska spela, springa och ha kul! 🥅",
                    "🏆 Välkommen till fotbollsfest! Kom som du är och var redo för action på planen! ⚽",
                    "⚽ Dags för fotboll och skoj! Ta med dig sporthumöret och kom och fira med oss! 🏃‍♂️"
                ]
            };

            const themeInvitations = invitations[theme] || [
                "🎉 Du är inbjuden till ett super-kul kalas! Kom och fira med oss! 🎈"
            ];

            const invitation = themeInvitations[currentInvitationIndex % themeInvitations.length];
            
            const fullInvitation = `${invitation}

📅 Datum: [Datum]
🕐 Tid: 14:00-16:30
📍 Plats: [Adress]
🎈 Ålder: ${formData.age} år
👥 Vi blir: ${formData.guestCount} barn

OSA till [telefonnummer] senast [datum]

Vi ses! 🎊`;

            const html = `
                <div class="invitation-box">
                    <button class="copy-btn" onclick="copyInvitation()">Kopiera text</button>
                    <pre id="invitation-text">${fullInvitation}</pre>
                </div>
                <button style="background: #007bff; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px;" onclick="generateNewInvitation('${theme}')">
                    🔄 Generera ny inbjudan
                </button>
            `;
            
            document.getElementById('invitation-content').innerHTML = html;
        }

        function generateNewInvitation(theme) {
            currentInvitationIndex++;
            generateInvitation(theme);
        }

        function copyInvitation() {
            const text = document.getElementById('invitation-text').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Kopierat! ✅';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        function generateFoodSuggestions(theme, budget) {
            const foods = {
                musik: {
                    lag: [
                        { name: 'Musiknot-smörgåsar', description: 'Smörgåsar klippta som musiknoter', price: '💰', cost: '~80 kr' },
                        { name: 'Rytm-popcorn', description: 'Hemgjord popcorn i musiktemat', price: '💰', cost: '~40 kr' }
                    ],
                    medel: [
                        { name: 'Xylofon-fruktfat', description: 'Frukt arrangerat som xylofon i färgordning', price: '💸', cost: '~150 kr' },
                        { name: 'Musiknot-muffins', description: 'Cupcakes med musiknoter i glasyr', price: '💸', cost: '~120 kr' }
                    ],
                    hog: [
                        { name: 'DJ-tårta med chokladskivor', description: 'Professionell tårta designad som DJ-bord', price: '💎', cost: '~400 kr' },
                        { name: 'Smoothie-bar med musik', description: 'Färgglada smoothies serverade med musik', price: '💎', cost: '~300 kr' }
                    ]
                },
                prinsessor: {
                    lag: [
                        { name: 'Prinsess-smörgåsar', description: 'Smörgåsar i kronform', price: '💰', cost: '~90 kr' },
                        { name: 'Rosa popcorn', description: 'Hemgjord rosa popcorn', price: '💰', cost: '~50 kr' }
                    ],
                    medel: [
                        { name: 'Prinsess-cupcakes', description: 'Rosa cupcakes med kronor och glitter', price: '💸', cost: '~140 kr' },
                        { name: 'Kunglig fruktdryck', description: 'Rosa lemonad med glitter', price: '💸', cost: '~100 kr' }
                    ],
                    hog: [
                        { name: 'Slottstårta', description: 'Tårta formad som ett slott', price: '💎', cost: '~500 kr' },
                        { name: 'Afternoon tea för barn', description: 'Minipajer, scones och te-koppar', price: '💎', cost: '~350 kr' }
                    ]
                }
            };

            const budgetFoods = foods[theme] ? foods[theme][budget] || foods[theme].medel : [
                { name: 'Temaanpassade snacks', description: 'Enkla snacks anpassade efter temat', price: '💰', cost: '~100 kr' }
            ];

            let html = '';
            budgetFoods.forEach(food => {
                html += `
                    <div class="food-item">
                        <div>
                            <div style="font-weight: bold;">${food.name}</div>
                            <div style="color: #666; font-size: 0.9rem;">${food.description}</div>
                            <div style="color: #888; font-size: 0.8rem;">${food.cost}</div>
                        </div>
                        <div class="price-tag">${food.price}</div>
                    </div>
                `;
            });
            
            document.getElementById('food-content').innerHTML = html;
        }

        function generateAccessories(theme, budget) {
            const accessories = {
                musik: {
                    lag: [
                        { name: 'Musiknot-ballonger', description: 'Svarta ballonger med vita musiknoter', price: '💰', store: 'Panduro eller Dollarstore', cost: '~60 kr' },
                        { name: 'Hem-DJ-station', description: 'Kartong gjord till DJ-bord', price: '💰', store: 'Hemmagjord av kartonger', cost: '~20 kr' }
                    ],
                    medel: [
                        { name: 'Mini-discolampa', description: 'LED-lampa som projicerar färger', price: '💸', store: 'Elgiganten eller Clas Ohlson', cost: '~150 kr' },
                        { name: 'Karaoke-mikrofon', description: 'Bluetooth-mikrofon för karaoke', price: '💸', store: 'Media Markt', cost: '~200 kr' }
                    ],
                    hog: [
                        { name: 'Professionell DJ-utrustning', description: 'Hyra av riktigt DJ-bord', price: '💎', store: 'Hyra från Ljudia', cost: '~400 kr/dag' },
                        { name: 'Live-band för barn', description: 'Musikband som spelar barnmusik', price: '💎', store: 'Booka via Barnunderhållning.se', cost: '~800 kr' }
                    ]
                }
            };

            const budgetAccessories = accessories[theme] ? accessories[theme][budget] || accessories[theme].medel : [
                { name: 'Temaballonger', description: 'Ballonger i temats färger', price: '💰', store: 'Panduro', cost: '~50 kr' }
            ];

            let html = '';
            budgetAccessories.forEach(item => {
                html += `
                    <div class="accessories-item">
                        <div style="font-weight: bold; margin-bottom: 8px;">${item.name}</div>
                        <div style="color: #666; margin-bottom: 5px;">${item.description}</div>
                        <div style="font-size: 0.9rem; color: #888;">📍 ${item.store}</div>
                        <div style="font-size: 0.9rem; color: #888;">💰 ${item.cost}</div>
                        <div style="margin-top: 5px;">${item.price}</div>
                    </div>
                `;
            });
            
            document.getElementById('accessories-content').innerHTML = html;
        }

        function showPremiumModal() {
            document.getElementById('premium-modal').classList.remove('hidden');
        }

        function closePremiumModal() {
            document.getElementById('premium-modal').classList.add('hidden');
        }

        function upgradeToPremium() {
            // Simulate premium upgrade
            localStorage.setItem('kalaskollen-premium', 'true');
            isPremium = true;
            updatePremiumAccess();
            closePremiumModal();
            
            // Show success message
            alert('Grattis! Du har nu Kalaskollen Premium! 🎉\nAlla teman är nu upplåsta!');
        }

        function updatePremiumAccess() {
            if (isPremium) {
                document.querySelectorAll('.interest-card.premium').forEach(card => {
                    card.classList.remove('premium');
                    const lockIcon = card.querySelector('.lock-icon');
                    if (lockIcon) {
                        lockIcon.remove();
                    }
                });
            }
        }

        function resetForm() {
            // Reset form data
            formData = {
                age: '',
                theme: '',
                guestCount: '',
                budget: '',
                location: '',
                foodPrefs: ''
            };
            
            // Reset form fields
            document.getElementById('age').value = '';
            document.getElementById('guestCount').value = '';
            document.getElementById('foodPrefs').value = '';
            
            // Reset selections
            document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
            document.getElementById('theme-confirmation').classList.add('hidden');
            
            // Reset validation
            validateForm();
            
            // Show form
            document.getElementById('results-container').classList.add('hidden');
            document.getElementById('form-container').classList.remove('hidden');
            
            // Reset invitation index
            currentInvitationIndex = 0;
        }
    </script>
</body>
</html>